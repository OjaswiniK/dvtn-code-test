import{o as R,c as $,r as N}from"./chunks/ReCaptchaVuePlugin.js";import{g as z,n as O,a as w,e as L,S as V}from"./chunks/swiper-core.js";import{E as q}from"./chunks/EventBus.js";import{_ as F}from"./chunks/_plugin-vue_export-helper.js";import"./chunks/_commonjsHelpers.js";function j(m){let{swiper:e,extendParams:x,on:T,emit:b}=m;const _=z();x({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let E,I=w(),o;const r=[];function i(t){let u=0,a=0,s=0,d=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(u=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(u=a,a=0),s=u*10,d=a*10,"deltaY"in t&&(d=t.deltaY),"deltaX"in t&&(s=t.deltaX),t.shiftKey&&!s&&(s=d,d=0),(s||d)&&t.deltaMode&&(t.deltaMode===1?(s*=40,d*=40):(s*=800,d*=800)),s&&!u&&(u=s<1?-1:1),d&&!a&&(a=d<1?-1:1),{spinX:u,spinY:a,pixelX:s,pixelY:d}}function D(){e.enabled&&(e.mouseEntered=!0)}function P(){e.enabled&&(e.mouseEntered=!1)}function h(t){return e.params.mousewheel.thresholdDelta&&t.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&w()-I<e.params.mousewheel.thresholdTime?!1:t.delta>=6&&w()-I<60?!0:(t.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),b("scroll",t.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),b("scroll",t.raw)),I=new _.Date().getTime(),!1)}function v(t){const n=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&n.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&n.releaseOnEdges)return!0;return!1}function X(t){let n=t,g=!0;if(!e.enabled||t.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const p=e.params.mousewheel;e.params.cssMode&&n.preventDefault();let u=e.el;e.params.mousewheel.eventsTarget!=="container"&&(u=document.querySelector(e.params.mousewheel.eventsTarget));const a=u&&u.contains(n.target);if(!e.mouseEntered&&!a&&!p.releaseOnEdges)return!0;n.originalEvent&&(n=n.originalEvent);let s=0;const d=e.rtlTranslate?-1:1,f=i(n);if(p.forceToAxis)if(e.isHorizontal())if(Math.abs(f.pixelX)>Math.abs(f.pixelY))s=-f.pixelX*d;else return!0;else if(Math.abs(f.pixelY)>Math.abs(f.pixelX))s=-f.pixelY;else return!0;else s=Math.abs(f.pixelX)>Math.abs(f.pixelY)?-f.pixelX*d:-f.pixelY;if(s===0)return!0;p.invert&&(s=-s);let S=e.getTranslate()+s*p.sensitivity;if(S>=e.minTranslate()&&(S=e.minTranslate()),S<=e.maxTranslate()&&(S=e.maxTranslate()),g=e.params.loop?!0:!(S===e.minTranslate()||S===e.maxTranslate()),g&&e.params.nested&&n.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const l={time:w(),delta:Math.abs(s),direction:Math.sign(s),raw:t};r.length>=2&&r.shift();const M=r.length?r[r.length-1]:void 0;if(r.push(l),M?(l.direction!==M.direction||l.delta>M.delta||l.time>M.time+150)&&h(l):h(l),v(l))return!0}else{const l={time:w(),delta:Math.abs(s),direction:Math.sign(s)},M=o&&l.time<o.time+500&&l.delta<=o.delta&&l.direction===o.direction;if(!M){o=void 0;let y=e.getTranslate()+s*p.sensitivity;const k=e.isBeginning,A=e.isEnd;if(y>=e.minTranslate()&&(y=e.minTranslate()),y<=e.maxTranslate()&&(y=e.maxTranslate()),e.setTransition(0),e.setTranslate(y),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!k&&e.isBeginning||!A&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:l.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(E),E=void 0,r.length>=15&&r.shift();const Y=r.length?r[r.length-1]:void 0,G=r[0];if(r.push(l),Y&&(l.delta>Y.delta||l.direction!==Y.direction))r.splice(0);else if(r.length>=15&&l.time-G.time<500&&G.delta-l.delta>=1&&l.delta<=6){const C=s>0?.8:.2;o=l,r.splice(0),E=O(()=>{e.slideToClosest(e.params.speed,!0,void 0,C)},0)}E||(E=O(()=>{o=l,r.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(M||b("scroll",n),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),p.releaseOnEdges&&(y===e.minTranslate()||y===e.maxTranslate()))return!0}}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}function H(t){let n=e.el;e.params.mousewheel.eventsTarget!=="container"&&(n=document.querySelector(e.params.mousewheel.eventsTarget)),n[t]("mouseenter",D),n[t]("mouseleave",P),n[t]("wheel",X)}function c(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",X),!0):e.mousewheel.enabled?!1:(H("addEventListener"),e.mousewheel.enabled=!0,!0)}function B(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,X),!0):e.mousewheel.enabled?(H("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}T("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&B(),e.params.mousewheel.enabled&&c()}),T("destroy",()=>{e.params.cssMode&&c(),e.mousewheel.enabled&&B()}),Object.assign(e.mousewheel,{enable:c,disable:B})}function W(m){let{swiper:e,extendParams:x,emit:T,once:b}=m;x({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function _(){if(e.params.cssMode)return;const o=e.getTranslate();e.setTranslate(o),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function E(){if(e.params.cssMode)return;const{touchEventsData:o,touches:r}=e;o.velocities.length===0&&o.velocities.push({position:r[e.isHorizontal()?"startX":"startY"],time:o.touchStartTime}),o.velocities.push({position:r[e.isHorizontal()?"currentX":"currentY"],time:w()})}function I(o){let{currentPos:r}=o;if(e.params.cssMode)return;const{params:i,wrapperEl:D,rtlTranslate:P,snapGrid:h,touchEventsData:v}=e,H=w()-v.touchStartTime;if(r<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(r>-e.maxTranslate()){e.slides.length<h.length?e.slideTo(h.length-1):e.slideTo(e.slides.length-1);return}if(i.freeMode.momentum){if(v.velocities.length>1){const a=v.velocities.pop(),s=v.velocities.pop(),d=a.position-s.position,f=a.time-s.time;e.velocity=d/f,e.velocity/=2,Math.abs(e.velocity)<i.freeMode.minimumVelocity&&(e.velocity=0),(f>150||w()-a.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeMode.momentumVelocityRatio,v.velocities.length=0;let c=1e3*i.freeMode.momentumRatio;const B=e.velocity*c;let t=e.translate+B;P&&(t=-t);let n=!1,g;const p=Math.abs(e.velocity)*20*i.freeMode.momentumBounceRatio;let u;if(t<e.maxTranslate())i.freeMode.momentumBounce?(t+e.maxTranslate()<-p&&(t=e.maxTranslate()-p),g=e.maxTranslate(),n=!0,v.allowMomentumBounce=!0):t=e.maxTranslate(),i.loop&&i.centeredSlides&&(u=!0);else if(t>e.minTranslate())i.freeMode.momentumBounce?(t-e.minTranslate()>p&&(t=e.minTranslate()+p),g=e.minTranslate(),n=!0,v.allowMomentumBounce=!0):t=e.minTranslate(),i.loop&&i.centeredSlides&&(u=!0);else if(i.freeMode.sticky){let a;for(let s=0;s<h.length;s+=1)if(h[s]>-t){a=s;break}Math.abs(h[a]-t)<Math.abs(h[a-1]-t)||e.swipeDirection==="next"?t=h[a]:t=h[a-1],t=-t}if(u&&b("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(P?c=Math.abs((-t-e.translate)/e.velocity):c=Math.abs((t-e.translate)/e.velocity),i.freeMode.sticky){const a=Math.abs((P?-t:t)-e.translate),s=e.slidesSizesGrid[e.activeIndex];a<s?c=i.speed:a<2*s?c=i.speed*1.5:c=i.speed*2.5}}else if(i.freeMode.sticky){e.slideToClosest();return}i.freeMode.momentumBounce&&n?(e.updateProgress(g),e.setTransition(c),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating=!0,L(D,()=>{!e||e.destroyed||!v.allowMomentumBounce||(T("momentumBounce"),e.setTransition(i.speed),setTimeout(()=>{e.setTranslate(g),L(D,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(T("_freeModeNoMomentumRelease"),e.updateProgress(t),e.setTransition(c),e.setTranslate(t),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,L(D,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(t),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeMode.sticky){e.slideToClosest();return}else i.freeMode&&T("_freeModeNoMomentumRelease");(!i.freeMode.momentum||H>=i.longSwipesMs)&&(T("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:_,onTouchMove:E,onTouchEnd:I}})}const K={props:{overlayId:{type:String,required:!0}},data(){return{swiper:void 0}},mounted(){const m=this.$el.querySelector(".swiper");if(!m){console.log("Swiper not initialised. Missing `.swiper` element.",this.$el);return}this.swiper=this.initSwiper(m),this.bindSwiperEvents(this.swiper),this.swiper.init()},methods:{initSwiper(m){return new V(m,{init:!1,modules:[W,j],allowTouchMove:!0,direction:"vertical",freeMode:!0,mousewheel:!0,slidesPerView:"auto",spaceBetween:30,breakpoints:{768:{spaceBetween:60}}})},bindSwiperEvents(m){q.addEventListener("imageGalleryOverlaySlideTo",e=>{let x=e.data.overlayId,T=e.data.targetIndex;x===this.overlayId&&this.swiper.slideTo(T)}),m.on("init",()=>{}),m.on("slideChange",()=>{})}}},Z={class:"cc-image-gallery-overlay-slider relative h-full w-full"};function J(m,e,x,T,b,_){return R(),$("div",Z,[N(m.$slots,"default")])}const ie=F(K,[["render",J]]);export{ie as default};
