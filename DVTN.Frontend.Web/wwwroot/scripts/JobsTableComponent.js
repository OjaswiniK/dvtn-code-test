import{o as r,c as n,a as e,b as g,F as u,j as p,n as d,h,t as c}from"./chunks/ReCaptchaVuePlugin.js";import{_}from"./chunks/_plugin-vue_export-helper.js";import"./chunks/_commonjsHelpers.js";const b={props:{jobsApi:{type:String,required:!0},jobsApiMethod:{type:String,required:!0}},data(){return{jobs:[],message:"",error:!1,loading:!0,currentPage:1,totalPages:1}},computed:{isFirstPage(){return this.currentPage<=1},isLastPage(){return this.currentPage>=this.totalPages}},created(){this.fetchJobsData()},methods:{goToPage(i){i<1||i>this.totalPages||this.fetchJobsData(i)},async fetchJobsData(i=1){if(!this.jobsApi||!this.jobsApiMethod){console.error("Missing API details. Cannot get jobs data.");return}this.loading=!0;try{const s=await fetch(this.jobsApi,{method:this.jobsApiMethod||"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:i})}),l=await s.json();this.loading=!1,s.status===200&&(this.jobs=l.jobs||[],this.currentPage=l.page||1,this.totalPages=l.totalPages||1),s.status===400&&(this.error=!0,this.message=l.message)}catch(s){console.error("Error:",s)}}}},v={class:"cc-jobs-table-component"},m={key:0},f={key:0,class:"absolute inset-0 top-[56px] z-10 border-b border-b-abergeldie-gray bg-white/80"},x=e("div",{class:"relative h-full"},[e("span",{class:"spinner"})],-1),w=[x],y={class:"w-full border-collapse"},P=e("thead",null,[e("tr",{class:"text-sm sm:text-base"},[e("th",null,"Job title"),e("th",null,"Team"),e("th",null,"Location"),e("td",{class:"hidden w-10 md:table-cell"})])],-1),j={class:"relative min-h-20"},k={key:0,class:"h-20 border-b border-b-abergeldie-gray"},L=e("td",{colspan:"4"},[e("p",{class:"text-center"},"No jobs available at this time.")],-1),M=[L],C=["href"],z=e("td",{class:"hidden w-10 sm:table-cell"},[e("svg",{class:"fa-icon-chevron-right mx-auto w-3 fill-links",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},[e("path",{d:"M321.9 256l-17 17L113 465l-17 17L62.1 448l17-17 175-175L79 81l-17-17L96 30.1l17 17L305 239l17 17z"})])],-1),A={key:0,class:"pagination mt-16 border-t pt-10"},T={class:"flex items-center justify-center gap-x-6 text-center"},B=e("svg",{viewBox:"0 0 256 512",class:"svg-icon-chevron-right h-4 w-4 -translate-x-0.5 rotate-180 fill-current",xmlns:"http://www.w3.org/2000/svg",role:"presentation"},[e("path",{d:"M24.707 38.101 4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z"})],-1),J=[B],S={class:"space-x-2"},q=["value"],D=e("span",null,"of",-1),F=e("svg",{viewBox:"0 0 256 512",class:"svg-icon-chevron-right translate-0.5 h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",role:"presentation"},[e("path",{d:"M24.707 38.101 4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z"})],-1),N=[F],E={key:1},O={class:"rounded-md bg-yellow-50 p-4"},V={class:"flex items-center"},H=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),I={class:"ml-3"},G={class:"mt-2 text-yellow-800"};function K(i,s,l,Q,t,a){return r(),n("div",v,[t.error?(r(),n("div",E,[e("div",O,[e("div",V,[H,e("div",I,[e("div",G,c(t.message),1)])])])])):(r(),n("div",m,[e("div",{class:d(["relative overflow-auto",{"min-h-80":t.loading&&t.jobs.length===0}])},[t.loading?(r(),n("div",f,w)):g("",!0),e("table",y,[P,e("tbody",j,[!t.loading&&t.jobs.length===0?(r(),n("tr",k,M)):(r(!0),n(u,{key:1},p(t.jobs,o=>(r(),n("tr",{key:o.id,class:"text-sm odd:bg-abergeldie-gray sm:text-base"},[e("td",null,[e("a",{class:"text-links hover:text-links-hover hover:underline",href:o.url,target:"_blank"},c(o.title),9,C)]),e("td",null,c(o.team),1),e("td",null,c(o.location),1),z]))),128))])])],2),t.totalPages>1?(r(),n("div",A,[e("nav",T,[e("button",{type:"button",class:d(["js-page-prev flex aspect-square h-[50px] items-center justify-center rounded-full bg-abergeldie-green text-white transition-colors hover:bg-abergeldie-blue",{"pointer-events-none opacity-30":a.isFirstPage}]),onClick:s[0]||(s[0]=h(o=>{a.goToPage(t.currentPage-1)},["prevent"]))},J,2),e("div",null,[e("div",S,[e("input",{type:"text",class:"w-12 rounded text-center",value:t.currentPage,onChange:s[1]||(s[1]=h(o=>{a.goToPage(o.target.value)},["prevent"]))},null,40,q),D,e("span",null,c(t.totalPages),1)])]),e("button",{type:"button",class:d(["flex aspect-square h-[50px] items-center justify-center rounded-full bg-abergeldie-green text-white transition-colors hover:bg-abergeldie-blue",{"pointer-events-none opacity-30":a.isLastPage}]),onClick:s[2]||(s[2]=h(o=>{a.goToPage(t.currentPage+1)},["prevent"]))},N,2)])])):g("",!0)]))])}const X=_(b,[["render",K]]);export{X as default};
