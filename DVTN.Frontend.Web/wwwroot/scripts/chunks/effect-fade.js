import{b as u,e as h}from"./swiper-core.js";function E(f){const{effect:e,swiper:t,on:i,setTranslate:d,setTransition:p,overwriteParams:o,perspective:r,recreateShadows:a,getEffectParams:s}=f;i("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),r&&r()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const n=o?o():{};Object.assign(t.params,n),Object.assign(t.originalParams,n)}),i("setTranslate",()=>{t.params.effect===e&&d()}),i("setTransition",(n,c)=>{t.params.effect===e&&p(c)}),i("transitionEnd",()=>{if(t.params.effect===e&&a){if(!s||!s().slideShadows)return;t.slides.forEach(n=>{n.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>c.remove())}),a()}});let l;i("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(l=!0),requestAnimationFrame(()=>{l&&t.slides&&t.slides.length&&(d(),l=!1)}))})}function g(f,e){const t=u(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function T(f){let{swiper:e,duration:t,transformElements:i,allSlides:d}=f;const{activeIndex:p}=e,o=r=>r.parentElement?r.parentElement:e.slides.filter(s=>s.shadowRoot&&s.shadowRoot===r.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let r=!1,a;d?a=i:a=i.filter(s=>{const l=s.classList.contains("swiper-slide-transform")?o(s):s;return e.getSlideIndex(l)===p}),a.forEach(s=>{h(s,()=>{if(r||!e||e.destroyed)return;r=!0,e.animating=!1;const l=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(l)})})}}function v(f){let{swiper:e,extendParams:t,on:i}=f;t({fadeEffect:{crossFade:!1}}),E({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:o}=e,r=e.params.fadeEffect;for(let a=0;a<o.length;a+=1){const s=e.slides[a];let n=-s.swiperSlideOffset;e.params.virtualTranslate||(n-=e.translate);let c=0;e.isHorizontal()||(c=n,n=0);const w=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(s.progress),0):1+Math.min(Math.max(s.progress,-1),0),m=g(r,s);m.style.opacity=w,m.style.transform=`translate3d(${n}px, ${c}px, 0px)`}},setTransition:o=>{const r=e.slides.map(a=>u(a));r.forEach(a=>{a.style.transitionDuration=`${o}ms`}),T({swiper:e,duration:o,transformElements:r,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}export{v as E};
